# 更新日志

## [2.0.0] - 2025-09-05

### 🚀 重大功能更新

#### System Prompt 功能重构
- **开放查看权限**: 任何用户都可以直接点击 System Prompt 按钮查看内容
- **管控编辑权限**: 只有管理员输入密码后才能保存修改
- **优化用户体验**: 消除了查看时的密码验证障碍

#### UI 交互优化
- **修复标签页问题**: 标签页下划线现在正确跟随选中状态
- **修复模态框跳动**: 切换标签页时模态框位置保持稳定
- **增强密码验证**: PasswordModal 组件支持自定义标题和描述

### 🔧 技术改进

#### 前端架构
- 重构权限验证逻辑，分离查看和编辑权限
- 优化组件状态管理，提升交互响应性
- 改进模态框定位策略，从居中对齐改为顶部对齐

#### 代码质量
- 修复标签页激活状态判断条件错误
- 优化组件接口设计，增强可复用性
- 完善错误处理和用户反馈机制

### 💥 破坏性变更

- **System Prompt 访问模式变更**: 从"密码验证后查看和编辑"改为"直接查看，密码验证后编辑"
- **需要重新部署**: 前端应用需要重新构建和部署

### 📋 兼容性说明

- ✅ 后端 API 完全兼容，无需修改
- ✅ 环境变量配置保持不变
- ✅ 数据库结构无变化
- ✅ 现有功能正常工作

### 🛠️ 部署说明

1. 拉取最新代码: `git pull origin main`
2. 切换到新版本: `git checkout v2.0.0`
3. 重新构建前端: `cd frontend && npm run build`
4. 重启服务: `./restart-services.sh`

### 📝 文件变更

#### 修改的文件
- `frontend/src/App.tsx` - 移除查看时的密码验证
- `frontend/src/components/UnifiedWorkflow.tsx` - 添加保存时密码验证，修复标签页和模态框问题
- `frontend/src/components/PasswordModal.tsx` - 增强组件功能

#### 新增的文件
- `SYSTEM_PROMPT_UPDATE.md` - 功能更新详细说明
- `CHANGELOG.md` - 版本更新日志

### 🧪 测试验证

- ✅ 前端代码编译通过
- ✅ API 接口测试正常
- ✅ 密码验证逻辑正确
- ✅ UI 交互问题修复
- ✅ 用户体验显著提升

---

## [1.x.x] - 历史版本

详见 Git 提交历史记录。
